<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Grade penalty edge weight function — gradePenaltyFn • roads</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Grade penalty edge weight function — gradePenaltyFn"><meta name="description" content="Method for calculating the weight of an edge between two nodes from the value
of the input raster at each of those nodes (x1 and x2), designed for a single
DEM input. The method assumes an input weightRaster in which:
NA indicates a road cannot be built
Negative values are costs for crossing streams or other barriers that are
crossable but expensive. Edges that link to barrier penalty (negative value)
nodes are assigned the largest barrier penalty weight.
Zero values are assumed to be existing roads.
All other values are interpreted as elevation in the units of the raster
map (so that a difference between two cells equal to the map resolution can be
interpreted as 100% grade)
This is a simplified version of the grade penalty approach taken by Anderson and Nelson (2004):
The approach does not distinguish between adverse and favourable grades.
Default construction cost values are from the BC interior appraisal manual.
The approach ignores (unknown) grade penalties beside roads and barriers in order to
avoid increased memory and computational burden associated with multiple input rasters.

"><meta property="og:description" content="Method for calculating the weight of an edge between two nodes from the value
of the input raster at each of those nodes (x1 and x2), designed for a single
DEM input. The method assumes an input weightRaster in which:
NA indicates a road cannot be built
Negative values are costs for crossing streams or other barriers that are
crossable but expensive. Edges that link to barrier penalty (negative value)
nodes are assigned the largest barrier penalty weight.
Zero values are assumed to be existing roads.
All other values are interpreted as elevation in the units of the raster
map (so that a difference between two cells equal to the map resolution can be
interpreted as 100% grade)
This is a simplified version of the grade penalty approach taken by Anderson and Nelson (2004):
The approach does not distinguish between adverse and favourable grades.
Default construction cost values are from the BC interior appraisal manual.
The approach ignores (unknown) grade penalties beside roads and barriers in order to
avoid increased memory and computational burden associated with multiple input rasters.

"><meta property="og:image" content="https://landscitech.github.io/roads/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">roads</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/grade-penalty.html">Using the grade penalty function</a></li>
    <li><a class="dropdown-item" href="../articles/ReconstructRoadHistory.html">Reconstruct road development history</a></li>
    <li><a class="dropdown-item" href="../articles/roads-vignette.html">roads Package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/LandSciTech/roads/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Grade penalty edge weight function</h1>
      <small class="dont-index">Source: <a href="https://github.com/LandSciTech/roads/blob/master/R/weightFunctions.R" class="external-link"><code>R/weightFunctions.R</code></a></small>
      <div class="d-none name"><code>gradePenaltyFn.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Method for calculating the weight of an edge between two nodes from the value
of the input raster at each of those nodes (<code>x1</code> and <code>x2</code>), designed for a single
DEM input. The method assumes an input <code>weightRaster</code> in which:</p><ul><li><p><code>NA</code> indicates a road cannot be built</p></li>
<li><p>Negative values are costs for crossing streams or other barriers that are
crossable but expensive. Edges that link to barrier penalty (negative value)
nodes are assigned the largest barrier penalty weight.</p></li>
<li><p>Zero values are assumed to be existing roads.</p></li>
<li><p>All other values are interpreted as elevation in the units of the raster
map (so that a difference between two cells equal to the map resolution can be
interpreted as 100% grade)
This is a simplified version of the grade penalty approach taken by Anderson and Nelson (2004):
The approach does not distinguish between adverse and favourable grades.
Default construction cost values are from the BC interior appraisal manual.
The approach ignores (unknown) grade penalties beside roads and barriers in order to
avoid increased memory and computational burden associated with multiple input rasters.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gradePenaltyFn</span><span class="op">(</span></span>
<span>  <span class="va">x1</span>,</span>
<span>  <span class="va">x2</span>,</span>
<span>  <span class="va">hdistance</span>,</span>
<span>  baseCost <span class="op">=</span> <span class="fl">16178</span>,</span>
<span>  limit <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  penalty <span class="op">=</span> <span class="fl">504</span>,</span>
<span>  limitWeight <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x-x-">x1, x2<a class="anchor" aria-label="anchor" href="#arg-x-x-"></a></dt>
<dd><p>Number. Value of the input raster at two nodes.</p></dd>


<dt id="arg-hdistance">hdistance<a class="anchor" aria-label="anchor" href="#arg-hdistance"></a></dt>
<dd><p>Number. Horizontal distance between nodes. <code>hdistance</code>, <code>x1</code>, and <code>x2</code>
should have the same units.</p></dd>


<dt id="arg-basecost">baseCost<a class="anchor" aria-label="anchor" href="#arg-basecost"></a></dt>
<dd><p>Number. Construction cost of 0% grade road per km.</p></dd>


<dt id="arg-limit">limit<a class="anchor" aria-label="anchor" href="#arg-limit"></a></dt>
<dd><p>Number. Maximum grade (%) on which roads can be built.</p></dd>


<dt id="arg-penalty">penalty<a class="anchor" aria-label="anchor" href="#arg-penalty"></a></dt>
<dd><p>Number. Cost increase (per km) associated with each
additional % increase in road grade.</p></dd>


<dt id="arg-limitweight">limitWeight<a class="anchor" aria-label="anchor" href="#arg-limitweight"></a></dt>
<dd><p>Number. Value assigned to edges that exceed the grade
limit. Try setting to a high (not <code>NA</code>) value if encountering problems with
disconnected graphs.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Anderson AE, Nelson J (2004) Projecting vector-based road networks with a
shortest path algorithm. Canadian Journal of Forest Research 34:1444–1457. https://doi.org/10.1139/x04-030</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">gradePenaltyFn</span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">0.51</span>,<span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 16682</span>
<span class="r-in"><span><span class="fu">gradePenaltyFn</span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">0.65</span>,<span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 23738</span>
<span class="r-in"><span><span class="co"># grade &gt; 20% so NA</span></span></span>
<span class="r-in"><span><span class="fu">gradePenaltyFn</span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">0.75</span>,<span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sarah Endicott, Kyle Lochhead, Josie Hughes, Patrick Kirby.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

