<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Project road network — projectRoads • roads</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Project road network — projectRoads"><meta property="og:description" content="Project road locations based on existing roads, planned landings, and a cost
surface that defines the cost of building roads."><meta property="og:image" content="https://landscitech.github.io/roads/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">roads</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/roads-vignette.html">roads Package</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/LandSciTech/roads/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Project road network</h1>
    <small class="dont-index">Source: <a href="https://github.com/LandSciTech/roads/blob/HEAD/R/projectRoads.R" class="external-link"><code>R/projectRoads.R</code></a></small>
    <div class="hidden name"><code>projectRoads.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Project road locations based on existing roads, planned landings, and a cost
surface that defines the cost of building roads.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">projectRoads</span><span class="op">(</span></span>
<span>  landings <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cost <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roads <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roadMethod <span class="op">=</span> <span class="st">"mst"</span>,</span>
<span>  plotRoads <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mainTitle <span class="op">=</span> <span class="st">""</span>,</span>
<span>  neighbourhood <span class="op">=</span> <span class="st">"octagon"</span>,</span>
<span>  sim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roadsOut <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roadsInCost <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ANY,ANY,ANY,ANY,ANY,ANY,ANY,missing</span></span>
<span><span class="fu">projectRoads</span><span class="op">(</span></span>
<span>  landings <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cost <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roads <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roadMethod <span class="op">=</span> <span class="st">"mst"</span>,</span>
<span>  plotRoads <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mainTitle <span class="op">=</span> <span class="st">""</span>,</span>
<span>  neighbourhood <span class="op">=</span> <span class="st">"octagon"</span>,</span>
<span>  sim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roadsOut <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roadsInCost <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for ANY,ANY,ANY,ANY,ANY,ANY,ANY,list</span></span>
<span><span class="fu">projectRoads</span><span class="op">(</span></span>
<span>  landings <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cost <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roads <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roadMethod <span class="op">=</span> <span class="st">"mst"</span>,</span>
<span>  plotRoads <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mainTitle <span class="op">=</span> <span class="st">""</span>,</span>
<span>  neighbourhood <span class="op">=</span> <span class="st">"octagon"</span>,</span>
<span>  sim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roadsOut <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  roadsInCost <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>landings</dt>
<dd><p>sf polygons or points, RasterLayer, SpatialPolygons*,
SpatialPoints*, matrix, containing features to be connected
to the road network. Matrix should contain columns x, y with coordinates,
all other columns will be ignored.</p></dd>


<dt>cost</dt>
<dd><p>RasterLayer. Cost surface where existing roads must be the only
cells with a cost of 0. If existing roads do not have 0 cost set
<code>roadsInCost = FALSE</code> and they will be burned in.</p></dd>


<dt>roads</dt>
<dd><p>sf lines, SpatialLines*, RasterLayer. Existing road network.</p></dd>


<dt>roadMethod</dt>
<dd><p>Character. Options are "mst", "lcp", "snap".</p></dd>


<dt>plotRoads</dt>
<dd><p>Boolean. Should the resulting road network be plotted.
Default FALSE.</p></dd>


<dt>mainTitle</dt>
<dd><p>Character. A title for the plot</p></dd>


<dt>neighbourhood</dt>
<dd><p>Character. 'rook','queen', or 'octagon'. The cells that
should be considered adjacent. 'octagon' option is a modified version of
the queen's 8 cell neighbourhood in which diagonals weights are 2^0.5x
higher than horizontal/vertical weights.</p></dd>


<dt>sim</dt>
<dd><p>list. Returned from a previous iteration of <code>projectRoads</code>.
cost, roads, and <code>roadMethod</code> are ignored if a <code>sim</code> list is provided.</p></dd>


<dt>roadsOut</dt>
<dd><p>Character. Either "raster", "sf" or NULL. If "raster" roads
are returned as a raster in the <code>sim</code> list. If "sf" the roads are returned as
an sf object which will contain lines if the roads input was sf lines but a
geometry collection of lines and points if the roads input was a raster.
The points in the geometry collection represent the existing roads while
new roads are created as lines. If NULL (default) then the returned roads
are sf if the input is sf or Spatial* and raster if the input was a raster.</p></dd>


<dt>roadsInCost</dt>
<dd><p>Logical. The default is TRUE which means the cost raster
is assumed to include existing roads as 0 in its cost surface. If FALSE
then the roads will be "burned in" to the cost raster with a cost of 0.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a list with components:</p><ul><li><p>roads: the projected road network, including new and input roads.</p></li>
<li><p>costSurface: the input cost surface, this is not updated to reflect 
      the new roads that were added.</p></li>
<li><p>roadMethod: the road simulation method used.</p></li>
<li><p>landings: the landings used in the simulation.</p></li>
<li><p>g: the graph that describes the cost of paths between each cell in the
      cost raster. This is updated based on the new roads so that vertices 
      were connected by new roads now have a cost of 0. This can be used to 
      avoid recomputing the graph in a simulation with multiple time steps.</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>Three different methods for projecting road networks have been implemented:</p><ul><li><p>"snap": Connects each landing directly to the closest road
without reference to the cost or other landings</p></li>
<li><p>"lcp": Least Cost
Path connects each landing to the closest point on the road by determining
the least cost path based on the cost surface provided, it does not consider
other landings</p></li>
<li><p>"mst": Minimum Spanning Tree connects all landings to
the road by determining the least cost path to the road or other landings
based on the cost surface</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">doPlots</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">### using:  scenario 1 / sf landings / least-cost path ("lcp")</span></span></span>
<span class="r-in"><span><span class="co"># demo scenario 1</span></span></span>
<span class="r-in"><span><span class="va">scen</span> <span class="op">&lt;-</span> <span class="va">demoScen</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># landing set 1 of scenario 1:</span></span></span>
<span class="r-in"><span><span class="va">land.pnts</span> <span class="op">&lt;-</span> <span class="va">scen</span><span class="op">$</span><span class="va">landings.points.sf</span><span class="op">[</span><span class="va">scen</span><span class="op">$</span><span class="va">landings.points.sf</span><span class="op">$</span><span class="va">set</span><span class="op">==</span><span class="fl">1</span>,<span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">prRes</span> <span class="op">&lt;-</span> <span class="fu">projectRoads</span><span class="op">(</span><span class="va">land.pnts</span>, <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, <span class="va">scen</span><span class="op">$</span><span class="va">road.line.sf</span>, <span class="st">"lcp"</span>,</span></span>
<span class="r-in"><span>                         plotRoads <span class="op">=</span> <span class="va">doPlots</span>, mainTitle <span class="op">=</span> <span class="st">"Scen 1: SPDF-LCP"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 0s detected in cost raster, these will be considered as existing roads</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### using: scenario 1 / RasterLayer landings / minimum spanning tree ("mst")</span></span></span>
<span class="r-in"><span><span class="co"># demo scenario 1</span></span></span>
<span class="r-in"><span><span class="va">scen</span> <span class="op">&lt;-</span> <span class="va">demoScen</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># the RasterLayer version of landing set 1 of scenario 1:</span></span></span>
<span class="r-in"><span><span class="va">land.rLyr</span> <span class="op">&lt;-</span> <span class="va">scen</span><span class="op">$</span><span class="va">landings.stack</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">prRes</span> <span class="op">&lt;-</span> <span class="fu">projectRoads</span><span class="op">(</span><span class="va">land.rLyr</span>, <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, <span class="va">scen</span><span class="op">$</span><span class="va">road.line.sf</span>, <span class="st">"mst"</span>,</span></span>
<span class="r-in"><span>                         plotRoads <span class="op">=</span> <span class="va">doPlots</span>, mainTitle <span class="op">=</span> <span class="st">"Scen 1: Raster-MST"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 0s detected in cost raster, these will be considered as existing roads</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">### using: scenario 2 / matrix landings raster roads / snapping ("snap")</span></span></span>
<span class="r-in"><span><span class="co"># demo scenario 2</span></span></span>
<span class="r-in"><span><span class="va">scen</span> <span class="op">&lt;-</span> <span class="va">demoScen</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># landing set 5 of scenario 2, as matrix:</span></span></span>
<span class="r-in"><span><span class="va">land.mat</span>  <span class="op">&lt;-</span> <span class="va">scen</span><span class="op">$</span><span class="va">landings.points</span><span class="op">[</span><span class="va">scen</span><span class="op">$</span><span class="va">landings.points</span><span class="op">$</span><span class="va">set</span><span class="op">==</span><span class="fl">5</span>,<span class="op">]</span><span class="op">@</span><span class="va">coords</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">prRes</span> <span class="op">&lt;-</span> <span class="fu">projectRoads</span><span class="op">(</span><span class="va">land.mat</span>, <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, <span class="va">scen</span><span class="op">$</span><span class="va">road.rast</span>, <span class="st">"snap"</span>,</span></span>
<span class="r-in"><span>                         plotRoads <span class="op">=</span> <span class="va">doPlots</span>, mainTitle <span class="op">=</span> <span class="st">"Scen 2: Matrix-Snap"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 0s detected in cost raster, these will be considered as existing roads</span>
<span class="r-in"><span>                         </span></span>
<span class="r-in"><span><span class="co">### using: scenario 7 / SpatialPolygonsDataFrame landings / minimum spanning tree ("mst")</span></span></span>
<span class="r-in"><span><span class="co"># demo scenario 7</span></span></span>
<span class="r-in"><span><span class="va">scen</span> <span class="op">&lt;-</span> <span class="va">demoScen</span><span class="op">[[</span><span class="fl">7</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># polygonal landings of demo scenario 7:</span></span></span>
<span class="r-in"><span><span class="va">land.poly</span> <span class="op">&lt;-</span> <span class="va">scen</span><span class="op">$</span><span class="va">landings.poly</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">prRes</span> <span class="op">&lt;-</span> <span class="fu">projectRoads</span><span class="op">(</span><span class="va">land.poly</span>, <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, <span class="va">scen</span><span class="op">$</span><span class="va">road.rast</span>, <span class="st">"mst"</span>,</span></span>
<span class="r-in"><span>                         plotRoads <span class="op">=</span> <span class="va">doPlots</span>, mainTitle <span class="op">=</span> <span class="st">"Scen 7: SpPoly-MST"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 0s detected in cost raster, these will be considered as existing roads</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># don't run to avoid examples being too long</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">## using scenario 7 / Polygon landings raster / minimum spanning tree</span></span></span>
<span class="r-in"><span><span class="co"># demo scenario 7</span></span></span>
<span class="r-in"><span><span class="va">scen</span> <span class="op">&lt;-</span> <span class="va">demoScen</span><span class="op">[[</span><span class="fl">7</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="co"># rasterize polygonal landings of demo scenario 7:</span></span></span>
<span class="r-in"><span><span class="va">land.polyR</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rasterize.html" class="external-link">rasterize</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">landings.poly</span>, <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">prRes</span> <span class="op">&lt;-</span> <span class="fu">projectRoads</span><span class="op">(</span><span class="va">land.polyR</span>, <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, <span class="va">scen</span><span class="op">$</span><span class="va">road.rast</span>, <span class="st">"mst"</span>,</span></span>
<span class="r-in"><span>                         plotRoads <span class="op">=</span> <span class="va">doPlots</span>, mainTitle <span class="op">=</span> <span class="st">"Scen 7: PolyRast-MST"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sarah Endicott, Kyle Lochhead, Josie Hughes, Patrick Kirby.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

