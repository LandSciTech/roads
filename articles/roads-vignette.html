<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>roads Package • roads</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="roads Package">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">roads</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/grade-penalty.html">Using the grade penalty function</a></li>
    <li><a class="dropdown-item" href="../articles/ReconstructRoadHistory.html">Reconstruct road development history</a></li>
    <li><a class="dropdown-item" href="../articles/roads-vignette.html">roads Package</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/LandSciTech/roads/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>roads Package</h1>
            
            <h4 data-toc-skip class="date">2026-01-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/LandSciTech/roads/blob/master/vignettes/roads-vignette.Rmd" class="external-link"><code>vignettes/roads-vignette.Rmd</code></a></small>
      <div class="d-none name"><code>roads-vignette.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This tutorial on using the <code>projectRoads</code> function of the
<code>roads</code> package to project forest road networks borrows
heavily from a demonstration written by Kyle Lochhead and Tyler Muhly in
2018. Example data sets used below are included in the package as
<code>CLUSexample</code> and <code>demoScen</code>.</p>
<p>There are three main inputs to the <code>projectRoads</code>
function:</p>
<ol style="list-style-type: decimal">
<li>
<strong>weightRaster and weightFunction:</strong> together, these
determine the cost to build a road between two adjacent raster cells.
The <code>weightRaster</code> is a spatial gridded raster with values
for all locations where road construction is possible. The
<code>weightFunction</code> calculates the cost of constructing a road
between two adjacent raster cells from the <code>weightRaster</code> at
each of those cells.</li>
<li>
<strong>Existing Road Network:</strong> a spatial representation of
the existing road network.</li>
<li>
<strong>Landings:</strong> a set of locations to be connected to the
existing road network by constructing new roads.</li>
</ol>
<p><code>projectRoads</code> simulates new roads that connect landings
to the existing road network using one of four methods:</p>
<ol style="list-style-type: decimal">
<li><strong>Snap</strong></li>
<li><strong>Least-cost path (LCP)</strong></li>
<li><strong>Iterative least-cost path (ILCP)</strong></li>
<li><strong>Minimum spanning tree (MST)</strong></li>
</ol>
<p>The output of <code>projectRoads</code> is a list of simulation
results referred to as a “sim list”. The list contains five
elements:</p>
<ol style="list-style-type: decimal">
<li>
<strong>roads:</strong> the projected road network, including new
and input roads.</li>
<li>
<strong>weightRaster:</strong> the updated <code>weightRaster</code>
in which new and old roads have value 0.</li>
<li>
<strong>roadMethod</strong> the road simulation method used.</li>
<li>
<strong>landings</strong> the landings used in the simulation.</li>
<li>
<strong>g</strong> the graph that describes the cost of paths
between each cell in the updated <code>weightRaster</code>. Edges
between vertices connected by new roads have weight 0. <code>g</code>
can be used to avoid the cost of rebuilding the graph in a simulation
with multiple time steps.</li>
</ol>
<div class="section level4">
<h4 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/LandSciTech/roads" class="external-link">roads</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">## colours for displaying weight raster </span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"viridis"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="co"># Use colour blind friendly palette if available</span></span>
<span>  <span class="va">rastColours</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'grey50'</span>, <span class="fu">viridis</span><span class="fu">::</span><span class="fu"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">viridis</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">rastColours</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'grey50'</span>, <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">terrain.colors</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># terra objects need to be wrapped to be saved, this unwraps them</span></span>
<span><span class="va">CLUSexample</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepExData.html">prepExData</a></span><span class="op">(</span><span class="va">CLUSexample</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="resource-development-scenario">Resource development scenario<a class="anchor" aria-label="anchor" href="#resource-development-scenario"></a>
</h2>
<div class="section level4">
<h4 id="weights-raster-and-weight-function">1. Weights Raster and Weight Function<a class="anchor" aria-label="anchor" href="#weights-raster-and-weight-function"></a>
</h4>
<p>The cost of constructing a road segment to connect adjacent cells is
determined by the <code>weightFunction</code> and the
<code>weightRaster</code>. The <code>weightFunction</code> calculates
the cost of construction between adjacent cells from the value of the
<code>weightRaster</code> at those cells and the distance between them.
Two methods of calculating costs are provided, and there is an option
for users to develop their own. The default
<code>weightFunction = simpleCostFn</code> assumes that the values in
the <code>weightRaster</code> represent the cost of building a road
across a cell, and sets cost as the mean value of adjacent cells. The
alternative <code>weightFunction = gradePenaltyFn</code> penalizes road
construction on steep grades by setting cost as a function of the
difference in <code>weightRaster</code> values between adjacent cells.
In this case, the <code>weightRaster</code> is an elevation raster that
can also include barriers. See <code><a href="../reference/gradePenaltyFn.html">?gradePenaltyFn</a></code> for
details.</p>
<p>The following points apply to all <code>weightRasters</code>:</p>
<ul>
<li>The <code>weightRaster</code> must be a single, numeric
<code>SpatRaster</code> or <code>RasterLayer</code> object.</li>
<li>The coordinate reference system (CRS) of this raster must match the
CRS of the existing road network and landings.<br>
</li>
<li>The <code>weightRaster</code> determines the extent of area
considered for new road construction. Existing roads and landings
outside the extent of the <code>weightRaster</code> are ignored.</li>
<li>Values of cells that include existing roads should be 0, and all 0
values are assumed to be existing roads. Existing roads can be added to
<code>weightRaster</code> by setting
<code>roadsInWeight = FALSE</code>.</li>
<li>The resolution of the <code>weightRaster</code> determines the
resolution of the constructed road network. Adjacent cells are connected
with straight road segments, and each cell either contains a road, or it
does not.</li>
<li>NA values in the <code>weightRaster</code> are not included in the
graph, and are not considered for road construction. A landing
surrounded by NAs that cannot be connected to the existing road network
will produce an error.</li>
</ul>
<p>The weight raster for this basic example is a cost surface and the
<code>weightFunction</code> used is the average.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weightRaster</span> <span class="op">&lt;-</span> <span class="va">CLUSexample</span><span class="op">$</span><span class="va">cost</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="existing-road-network-layer">2. Existing road network layer<a class="anchor" aria-label="anchor" href="#existing-road-network-layer"></a>
</h4>
<p>The network of existing roads must be provided as an <code>sf</code>
object with geometry type <code>"LINES"</code>, a
<code>SpatialLines</code> object, a <code>RasterLayer</code>, or a
<code>SpatRaster</code>. If the input roads are a raster the projected
roads will also be returned as a raster by default, but if
<code>roadsOut = "sf"</code> then a geometry collection of lines and
points will be returned with points representing the input roads.</p>
<p>The road network included in the <code>CLUSexample</code> data-set is
a raster but we use a line for plotting.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## existing roads network</span></span>
<span><span class="va">roadsLine</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span>geometry <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_linestring</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">4.5</span>, <span class="fl">4.5</span>, <span class="fl">4.5</span><span class="op">)</span>,</span>
<span>         ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> </span>
<span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">weightRaster</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="landings-layers">3. Landings layer(s)<a class="anchor" aria-label="anchor" href="#landings-layers"></a>
</h4>
<p>Landings, or resource development locations, that are to be connected
to the existing road network can be specified in a variety of forms:</p>
<ul>
<li>A <code>sf</code> object with geometry type <code>"POINTS"</code> or
<code>"POLYGON"</code>
</li>
<li>A logical <code>SpatRaster</code> or <code>RasterLayer</code> object
with cell values of <code>TRUE</code> for landings,</li>
<li>A <code>SpatialPoints</code> or <code>SpatialPointsDataFrame</code>
object with points representing landings,</li>
<li>A matrix with at least two columns, with columns 1 and 2
representing x any y coordinates of landing locations respectively,</li>
<li>A <code>SpatialPolygons</code>or
<code>SpatialPolygonsDataFrame</code> object with polygons representing
landings,</li>
</ul>
<p>If the landings are polygons then the centroid is used as the
destination for new roads. For more control or to specify more than one
landing per polygon see Multiple landings per harvest section below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## landings as spatial points</span></span>
<span><span class="va">landings</span> <span class="op">&lt;-</span> <span class="fu">roads</span><span class="fu">::</span><span class="va"><a href="../reference/CLUSexample.html">CLUSexample</a></span><span class="op">$</span><span class="va">landings</span></span>
<span></span>
<span><span class="co">## plot example scenario</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>omi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours</span>, main <span class="op">=</span> <span class="st">'Example Scenario'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">roadsLine</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">landings</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, pch <span class="op">=</span> <span class="fl">19</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">7.25</span>, y <span class="op">=</span> <span class="fl">5</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"landings"</span>, <span class="st">"roads"</span><span class="op">)</span>, pch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">19</span>, <span class="cn">NA</span><span class="op">)</span>, </span>
<span>       lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>       xpd <span class="op">=</span> <span class="cn">NA</span>, inset <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>, xjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-3-1.png" class="r-plt" alt="" width="624"></p>
<p>Notice that the top row of the raster has a cost of zero where an
existing road traverses the landscape.</p>
</div>
<div class="section level4">
<h4 id="output-format">Output format<a class="anchor" aria-label="anchor" href="#output-format"></a>
</h4>
<p><code>projectRoads</code> accepts a wide range of classes of spatial
objects as input but all results are returned as <code>sf</code> for
vectors and <code>SpatRaster</code> for rasters.</p>
</div>
</div>
<div class="section level2">
<h2 id="simulation-of-new-roads-development">Simulation of new roads development<a class="anchor" aria-label="anchor" href="#simulation-of-new-roads-development"></a>
</h2>
<div class="section level3">
<h3 id="simulation-methods">Simulation methods<a class="anchor" aria-label="anchor" href="#simulation-methods"></a>
</h3>
<div class="section level4">
<h4 id="snapping">1. Snapping<a class="anchor" aria-label="anchor" href="#snapping"></a>
</h4>
<p>This approach simply ‘snaps’ a landing to the nearest (by Euclidean
distance) existing road segment, ignoring spatial variation in road
construction cost and the locations of other landings and access
roads.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## project new roads using the 'snap' approach</span></span>
<span><span class="va">projRoads_snap</span> <span class="op">&lt;-</span> <span class="fu">roads</span><span class="fu">::</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">landings</span>, <span class="va">weightRaster</span>, <span class="va">roadsLine</span>,</span>
<span>                                      roadMethod <span class="op">=</span> <span class="st">'snap'</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>omi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## plot the weight raster, landings, and roads segments to the landings</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours</span>, main <span class="op">=</span> <span class="st">"'Snapped' roads"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">landings</span>, pch <span class="op">=</span> <span class="fl">19</span><span class="op">)</span>  </span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">projRoads_snap</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span></span>
<span><span class="co">## update legend</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">7.25</span>, y <span class="op">=</span> <span class="fl">5</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"landings"</span>, <span class="st">"roads"</span><span class="op">)</span>, pch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">19</span>, <span class="cn">NA</span><span class="op">)</span>, </span>
<span>       lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>       xpd <span class="op">=</span> <span class="cn">NA</span>, inset <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>, xjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-4-1.png" class="r-plt" alt="" width="624"></p>
<p>This simple approach gives an unrealistically redundant road network
without branches that does not account for variation in road
construction costs across the landscape.</p>
</div>
<div class="section level4">
<h4 id="least-cost-paths-lcp">2. Least Cost Paths (LCP)<a class="anchor" aria-label="anchor" href="#least-cost-paths-lcp"></a>
</h4>
<p>The least cost paths method builds a ‘cost directed’ path (i.e., “as
the wolf runs”) for each landing to the existing road network. A
mathematical <a href="https://en.wikipedia.org/wiki/Graph_theory" class="external-link">graph</a> with a node
for each non-NA cell in the <code>weightRaster</code> and edge weights
determined by the <code>weightFunction</code> is built using <a href="https://igraph.org/r/" class="external-link"><code>igraph</code></a>. The graph is used
to compute least cost paths between each landing and the nearest
existing road using <a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm" class="external-link">Dijkstra’s
algorithm</a> implemented in the <a href="https://igraph.org/r/doc/distances.html" class="external-link">shortest_paths</a>
function in <code>igraph</code>. Graph weights are updated to include
new roads after all new roads are identified.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## project new roads using the 'LCP' approach</span></span>
<span><span class="va">projRoads_lcp</span> <span class="op">&lt;-</span> <span class="fu">roads</span><span class="fu">::</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">landings</span>, </span>
<span>                                        <span class="va">weightRaster</span>, </span>
<span>                                        <span class="va">roadsLine</span>, </span>
<span>                                        roadMethod <span class="op">=</span> <span class="st">'lcp'</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>omi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## plot the weight raster and overlay it with new roads</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours</span>, main <span class="op">=</span> <span class="st">"'LCP' roads"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">projRoads_lcp</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">landings</span>, pch <span class="op">=</span> <span class="fl">19</span><span class="op">)</span> </span>
<span><span class="co">## legend</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">7.25</span>, y <span class="op">=</span> <span class="fl">5</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"landings"</span>, <span class="st">"roads"</span><span class="op">)</span>, pch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">19</span>, <span class="cn">NA</span><span class="op">)</span>, </span>
<span>       lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>       xpd <span class="op">=</span> <span class="cn">NA</span>, inset <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>, xjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-5-1.png" class="r-plt" alt="" width="624"></p>
<p>The main disadvantage of this approach is that roads are developed
independently, which tends to produce parallel or redundant roads. This
could mimic road development in cases where licensees restrict others
from using their road (i.e., gated roads), and thereby force others to
consider building a nearly parallel road. In some cases there will be
branching, where two roads connecting two landings to an existing road
network will use the same least cost path; however, this will be
conditional on the spatial configuration of the local cost surface and
the existing road network.</p>
</div>
<div class="section level4">
<h4 id="iterative-least-cost-paths-ilcp">3. Iterative Least Cost Paths (ILCP)<a class="anchor" aria-label="anchor" href="#iterative-least-cost-paths-ilcp"></a>
</h4>
<p>This approach builds fewer redundant roads than the LCP method
because the graph edge weights are updated after each landing is
accessed, so that roads built earlier can be reused to access other
landings. The order is determined by the <code>ordering</code> argument
to <code>projectRoads</code>; by default the closest landings are
accessed first. The alternative <code>ordering = none</code> builds
roads in the order that landings are supplied by the user.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## project new roads using the 'ILCP' approach</span></span>
<span><span class="va">projRoads_ilcp</span> <span class="op">&lt;-</span> <span class="fu">roads</span><span class="fu">::</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">landings</span>, </span>
<span>                                        <span class="va">weightRaster</span>, </span>
<span>                                        <span class="va">roadsLine</span>, </span>
<span>                                        roadMethod <span class="op">=</span> <span class="st">'ilcp'</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>omi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## plot the weight raster and overlay it with new roads</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours</span>, main <span class="op">=</span> <span class="st">"'ILCP' roads"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">projRoads_ilcp</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">landings</span>, pch <span class="op">=</span> <span class="fl">19</span><span class="op">)</span>  <span class="co">## landings points</span></span>
<span><span class="co">## legend</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">7.25</span>, y <span class="op">=</span> <span class="fl">5</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"landings"</span>, <span class="st">"roads"</span><span class="op">)</span>, pch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">19</span>, <span class="cn">NA</span><span class="op">)</span>, </span>
<span>       lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>       xpd <span class="op">=</span> <span class="cn">NA</span>, inset <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>, xjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-6-1.png" class="r-plt" alt="" width="624"></p>
<p>The ILCP approach produces a more realistic branching network with
less redundancy. However, it is sensitive to the ordering of the
landings. Below we reverse the order of the landings but continue using
the default ordering of closest first. The two closest landings are tied
for distance to the road and the tie is broken by the order they are
supplied in so switching that produces a different road network.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## project new roads using the 'ILCP' approach</span></span>
<span><span class="va">projRoads_ilcp2</span> <span class="op">&lt;-</span> <span class="fu">roads</span><span class="fu">::</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html" class="external-link">st_coordinates</a></span><span class="op">(</span><span class="va">landings</span><span class="op">)</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">1</span>,<span class="op">]</span>, </span>
<span>                                        <span class="va">weightRaster</span>, </span>
<span>                                        <span class="va">roadsLine</span>, </span>
<span>                                        roadMethod <span class="op">=</span> <span class="st">'ilcp'</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; CRS of landings supplied as a matrix is assumed to match the weightRaster</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>omi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## plot the weight raster and overlay it with new roads</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours</span>, main <span class="op">=</span> <span class="st">"'ILCP' roads"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">projRoads_ilcp2</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">landings</span>, pch <span class="op">=</span> <span class="fl">19</span><span class="op">)</span>  <span class="co">## landings points</span></span>
<span><span class="co">## legend</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">7.25</span>, y <span class="op">=</span> <span class="fl">5</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"landings"</span>, <span class="st">"roads"</span><span class="op">)</span>, pch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">19</span>, <span class="cn">NA</span><span class="op">)</span>, </span>
<span>       lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>       xpd <span class="op">=</span> <span class="cn">NA</span>, inset <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>, xjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-7-1.png" class="r-plt" alt="" width="624"></p>
</div>
<div class="section level4">
<h4 id="minimum-spanning-tree-mst-with-least-cost-paths-lcp">4. Minimum Spanning Tree (MST) with Least Cost Paths (LCP)<a class="anchor" aria-label="anchor" href="#minimum-spanning-tree-mst-with-least-cost-paths-lcp"></a>
</h4>
<p>The MST approach builds upon the LCP approach by determining if
landings should be connected to one another before being connected to
the existing road network. In the MST approach, LCPs are estimated both
between the landings and between landings and the existing road network.
These distances are then used as nodes for solving a minimum spanning
tree network that minimizes the overall cost of connecting all landings
to the existing road network.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## project new roads using the 'MST' approach</span></span>
<span><span class="va">projRoads_mst</span> <span class="op">&lt;-</span> <span class="fu">roads</span><span class="fu">::</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">landings</span>, </span>
<span>                                        <span class="va">weightRaster</span>,</span>
<span>                                        <span class="va">roadsLine</span>, </span>
<span>                                        roadMethod <span class="op">=</span> <span class="st">'mst'</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>omi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">## plot the weight raster and overlay it with new roads</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours</span>, main <span class="op">=</span> <span class="st">"'MST' roads"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">projRoads_mst</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">landings</span>, pch <span class="op">=</span> <span class="fl">19</span><span class="op">)</span> </span>
<span><span class="co">## legend</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">7.25</span>, y <span class="op">=</span> <span class="fl">5</span>, legend <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"landings"</span>, <span class="st">"roads"</span><span class="op">)</span>, pch <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">19</span>, <span class="cn">NA</span><span class="op">)</span>, </span>
<span>       lwd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>       xpd <span class="op">=</span> <span class="cn">NA</span>, inset <span class="op">=</span> <span class="op">-</span><span class="fl">0.1</span>, xjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-8-1.png" class="r-plt" alt="" width="624"></p>
<p>The MST approach will produce fewer roads than the other approaches,
and realistic branching patterns. However, it is also more
computationally costly than the other methods.</p>
</div>
</div>
<div class="section level3">
<h3 id="one-time-versus-multi-temporal-simulation">One-time versus multi-temporal simulation<a class="anchor" aria-label="anchor" href="#one-time-versus-multi-temporal-simulation"></a>
</h3>
<p>Roads can be projected over a single time step (one-time) or over
multiple time steps. To demonstrate construction over multiple time
steps we use a demonstration scenario <code>demoScen</code> data-set
included in the roads package. The scenario includes four different sets
of landings.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## colours for displaying weight raster</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"viridis"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="co"># Use colour blind friendly palette if available</span></span>
<span>  <span class="va">rastColours2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'grey50'</span>, <span class="fu">viridis</span><span class="fu">::</span><span class="fu"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">viridis</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">rastColours2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'grey50'</span>, <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">terrain.colors</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">## scenario </span></span>
<span><span class="va">demoScen</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepExData.html">prepExData</a></span><span class="op">(</span><span class="va">demoScen</span><span class="op">)</span></span>
<span><span class="va">scen</span> <span class="op">&lt;-</span> <span class="va">demoScen</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">## landing sets 1 to 4 of this scenario </span></span>
<span><span class="va">land.pnts</span> <span class="op">&lt;-</span> <span class="va">scen</span><span class="op">$</span><span class="va">landings.points</span><span class="op">[</span><span class="va">scen</span><span class="op">$</span><span class="va">landings.points</span><span class="op">$</span><span class="va">set</span> <span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="co">## plot the weight raster and landings</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">'mar'</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, col <span class="op">=</span> <span class="va">rastColours2</span>, main <span class="op">=</span> <span class="st">'Cost and landings (by set)'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">land.pnts</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, pch <span class="op">=</span> <span class="fl">21</span>, cex <span class="op">=</span> <span class="fl">2</span>, bg <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html" class="external-link">st_coordinates</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">)</span>, labels <span class="op">=</span> <span class="va">land.pnts</span><span class="op">$</span><span class="va">set</span>, cex <span class="op">=</span> <span class="fl">0.6</span>, adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>     xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-9-1.png" class="r-plt" alt="" width="672"></p>
<div class="section level4">
<h4 id="one-time-simulation">One-time simulation<a class="anchor" aria-label="anchor" href="#one-time-simulation"></a>
</h4>
<p>If landings, costs, and roads are all specified to
<code>projectRoads</code>, then a one-time road simulation will be
performed that returns a list object holding the projected roads and
related information. This can be repeated multiple times for different
road building scenarios but each simulation will be independent of the
others.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## project roads for landing sets 1 to 4, with independent one-time simulations</span></span>
<span><span class="va">oneTime_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span> <span class="co">## empty list </span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">oneTime_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">oneTime_sim</span>,</span>
<span>                       <span class="fu">roads</span><span class="fu">::</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">[</span><span class="va">land.pnts</span><span class="op">$</span><span class="va">set</span><span class="op">==</span><span class="va">i</span>,<span class="op">]</span>,</span>
<span>                                              <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>,</span>
<span>                                              <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span><span class="op">==</span><span class="fl">0</span>,</span>
<span>                                              roadMethod<span class="op">=</span><span class="st">'mst'</span><span class="op">)</span><span class="op">$</span><span class="va">roads</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span></span>
<span><span class="co">## plot</span></span>
<span><span class="va">oldpar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">'mar'</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">oneTime_sim</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="op">!</span><span class="va">oneTime_sim</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span> </span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, col <span class="op">=</span> <span class="va">rastColours2</span>, </span>
<span>       main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'Landings set '</span>, <span class="va">i</span><span class="op">)</span>,</span>
<span>       legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">oneTime_sim</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">"grey50"</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">[</span><span class="va">land.pnts</span><span class="op">$</span><span class="va">set</span> <span class="op">==</span> <span class="va">i</span>, <span class="op">]</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>       pch <span class="op">=</span> <span class="fl">21</span>, cex <span class="op">=</span> <span class="fl">1.5</span>, bg <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-10-1.png" class="r-plt" alt="" width="672"></p>
<p>These independent one-time simulations are appropriate if each
landing set represents a different development scenario (e.g. each
representing a possible set of landings at time t=1), but they are not
appropriate if landings sets are sequential (e.g. set 1 is development
at time t=1, set 2 is development at time t=2, and so on). In the latter
case, roads at the beginning of time t should be the union of roads
developed in all previous times steps.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## raster representing the union of completely independent simulations for multiple sets</span></span>
<span><span class="va">oneTime_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">oneTime_sim</span><span class="op">)</span></span>
<span><span class="va">independent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">oneTime_sim</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## set non-road to NA for display purposes</span></span>
<span><span class="va">independent</span><span class="op">[</span><span class="op">!</span><span class="va">independent</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="co">## plot </span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, col <span class="op">=</span> <span class="va">rastColours2</span>,</span>
<span>     main <span class="op">=</span> <span class="st">'Union of independent sim results'</span>,</span>
<span>     legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">independent</span>, col <span class="op">=</span> <span class="st">'grey30'</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, pch <span class="op">=</span> <span class="fl">21</span>, cex <span class="op">=</span> <span class="fl">1.5</span>, bg <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-11-1.png" class="r-plt" alt="" width="480"></p>
</div>
<div class="section level4">
<h4 id="multi-temporal-simulation">Multi-temporal simulation<a class="anchor" aria-label="anchor" href="#multi-temporal-simulation"></a>
</h4>
<p>Multi-temporal (multiple time steps) road projections can be obtained
by providing <code>projectRoads</code> with the list produced by a
previous call to <code>projectRoads</code>, and a new set of landings.
The function uses the <code>sim</code> list as a starting point, and
avoids the computational cost of reconstructing the landscape graph.
This can be implemented in a loop.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## continuing on with demo scenario 1</span></span>
<span><span class="co">## landing sets 1 to 4 of this scenario as a raster stack</span></span>
<span><span class="va">land.stack</span> <span class="op">&lt;-</span> <span class="va">scen</span><span class="op">$</span><span class="va">landings.stack</span><span class="op">[[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># initialize sim list with first landings set</span></span>
<span><span class="va">multiTime_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">land.stack</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, </span>
<span>                                               <span class="va">scen</span><span class="op">$</span><span class="va">road.line</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; harvest raster values are all in 0,1. Using patches as landing areas</span></span>
<span></span>
<span><span class="co"># iterate over landings sets using the sim list from the previous run as input</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nlyr</a></span><span class="op">(</span><span class="va">land.stack</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">multiTime_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="va">multiTime_sim</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span>sim <span class="op">=</span>  <span class="va">multiTime_sim</span><span class="op">[[</span><span class="va">i</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, landings <span class="op">=</span> <span class="va">land.stack</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> </span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; harvest raster values are all in 0,1. Using patches as landing areas</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; harvest raster values are all in 0,1. Using patches as landing areas</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; harvest raster values are all in 0,1. Using patches as landing areas</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">'mar'</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, col <span class="op">=</span> <span class="va">rastColours2</span>, main <span class="op">=</span> <span class="st">'Roads at time t = 0'</span>, </span>
<span>       legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">road.line</span>, col <span class="op">=</span> <span class="st">'grey30'</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  </span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">multiTime_sim</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">multiTime_sim</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours2</span>, </span>
<span>       main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'Roads at time t = '</span>, <span class="va">i</span><span class="op">)</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">multiTime_sim</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">roads</span>, col <span class="op">=</span> <span class="st">'grey30'</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">[</span><span class="va">land.pnts</span><span class="op">$</span><span class="va">set</span> <span class="op">==</span> <span class="va">i</span>, <span class="op">]</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, pch <span class="op">=</span> <span class="fl">21</span>, </span>
<span>         cex <span class="op">=</span> <span class="fl">1.5</span>, bg <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">&gt;=</span> <span class="fl">2</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">[</span><span class="va">land.pnts</span><span class="op">$</span><span class="va">set</span> <span class="op">&lt;</span> <span class="va">i</span>, <span class="op">]</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, pch <span class="op">=</span> <span class="fl">1</span>, cex <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">[</span><span class="va">land.pnts</span><span class="op">$</span><span class="va">set</span> <span class="op">==</span> <span class="va">i</span>, <span class="op">]</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, pch <span class="op">=</span> <span class="fl">21</span>, </span>
<span>         cex <span class="op">=</span> <span class="fl">1.5</span>, bg <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-12-1.png" class="r-plt" alt="" width="672"></p>
</div>
</div>
<div class="section level3">
<h3 id="multiple-landings-per-harvest-block">Multiple landings per harvest block<a class="anchor" aria-label="anchor" href="#multiple-landings-per-harvest-block"></a>
</h3>
<p>Often harvest information is available as polygons showing the
cutover area but the point locations of landings are not known. The
roads package includes the <code>getLandingsFromTarget</code> function
to address these situations. By default
<code>getLandingsFromTarget</code> will use the centroid of a polygon as
the landing but other <code>sampleType</code> options include
<code>"random"</code> or <code>"regular"</code> selection of multiple
landing points within harvest blocks. For <code>"random"</code> or
<code>"regular"</code> sampling, <code>landingDens</code> specifies the
expected number of landings per unit area.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">harvPoly</span> <span class="op">&lt;-</span> <span class="va">demoScen</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">landings.poly</span></span>
<span></span>
<span><span class="va">outCent</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getLandingsFromTarget.html">getLandingsFromTarget</a></span><span class="op">(</span><span class="va">harvPoly</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: st_point_on_surface assumes attributes are constant over geometries</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">harvPoly</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">outCent</span>, col <span class="op">=</span> <span class="st">"red"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-13-1.png" class="r-plt" alt="" width="576"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Get random sample with density 0.02 pts per unit area</span></span>
<span><span class="va">outRand</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getLandingsFromTarget.html">getLandingsFromTarget</a></span><span class="op">(</span><span class="va">harvPoly</span>, <span class="fl">0.02</span>, sampleType <span class="op">=</span> <span class="st">"random"</span><span class="op">)</span></span>
<span><span class="co">#&gt; you have asked for &gt; 0.001 pts per m2 which is &gt; 1000 pts per km2 and may take a long time</span></span>
<span><span class="va">prRand</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">outRand</span>, <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, <span class="va">scen</span><span class="op">$</span><span class="va">road.line</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, main <span class="op">=</span> <span class="st">"Random Landings in Harvest Blocks"</span>,</span>
<span>     col <span class="op">=</span> <span class="va">rastColours2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">harvPoly</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">prRand</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span>,  col <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">outRand</span>, col <span class="op">=</span> <span class="st">"red"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-13-2.png" class="r-plt" alt="" width="576"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Get regular sample with density 0.02 pts per unit area</span></span>
<span><span class="va">outReg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getLandingsFromTarget.html">getLandingsFromTarget</a></span><span class="op">(</span><span class="va">harvPoly</span>, <span class="fl">0.02</span>, sampleType <span class="op">=</span> <span class="st">"regular"</span><span class="op">)</span></span>
<span><span class="co">#&gt; you have asked for &gt; 0.001 pts per m2 which is &gt; 1000 pts per km2 and may take a long time</span></span>
<span><span class="va">prReg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">outReg</span>, <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>,<span class="va">scen</span><span class="op">$</span><span class="va">road.line</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, main <span class="op">=</span> <span class="st">"Regular Landings in Harvest Blocks"</span>,</span>
<span>     col <span class="op">=</span> <span class="va">rastColours2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">harvPoly</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">prReg</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">outReg</span>, col <span class="op">=</span> <span class="st">"red"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-13-3.png" class="r-plt" alt="" width="576"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="co"># clean up </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="va">oldpar</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a>
</h2>
<p>This vignette is partially copied from Kyle Lochhead &amp; Tyler
Muhly’s <a href="https://github.com/bcgov/castor/blob/main/reports/roads/draft-CLUS-roads.md" class="external-link">2018
CLUS example</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sarah Endicott, Kyle Lochhead, Josie Hughes, Patrick Kirby.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
