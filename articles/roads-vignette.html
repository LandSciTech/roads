<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="roads">
<title>roads Package • roads</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="roads Package">
<meta property="og:description" content="roads">
<meta property="og:image" content="https://landscitech.github.io/roads/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">roads</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/getDistFromSource.html">getDistFromSource</a>
    <a class="dropdown-item" href="../articles/ReconstructRoadHistory.html">Reconstruct road development history</a>
    <a class="dropdown-item" href="../articles/roads-vignette.html">roads Package</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/LandSciTech/roads/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>roads Package</h1>
            
            <h4 data-toc-skip class="date">2024-05-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/LandSciTech/roads/blob/HEAD/vignettes/roads-vignette.Rmd" class="external-link"><code>vignettes/roads-vignette.Rmd</code></a></small>
      <div class="d-none name"><code>roads-vignette.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette provides a tutorial on the use of the
<code>roads</code> package for the spatial simulation of future roads
development under a given resource development scenario. This tutorial,
which borrows heavily from a demonstration written by Kyle Lochhead and
Tyler Muhly in 2018, will focus primarily on the
<code>projectRoads</code> function of the <code>roads</code> package, as
it is responsible for performing the simulation. Example data sets used
below are included in the package as <code>CLUSexample</code> and
<code>demoScen</code>.</p>
<p>In the context of this package, resource development scenarios are
represented by three components:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Weights Raster and Weight Function:</strong> the weights
raster is a spatial, gridded weight layer covering the entire landscape.
The weight function takes values from adjacent weights raster cells as
inputs and returns the cost of developing a new road between them.</li>
<li>
<strong>Existing Road Network:</strong> a spatial, representation of
the existing road network within the landscape.</li>
<li>
<strong>Landings:</strong> a set of locations where new resource
development is to take place.</li>
</ol>
<p>Given an input resource development scenario,
<code>projectRoads</code> will simulate new roads between the existing
road network and the landings using one of four algorithms:</p>
<ol style="list-style-type: decimal">
<li><strong>Snapping</strong></li>
<li><strong>Least-cost path (LCP)</strong></li>
<li><strong>Iterative least-cost path (ILCP)</strong></li>
<li><strong>Minimum spanning tree (MST)</strong></li>
</ol>
<p>The output of <code>projectRoads</code> is a list of simulation
results referred to as a “sim list”. The list contains five
elements:</p>
<ol style="list-style-type: decimal">
<li>
<strong>roads:</strong> the projected road network, including new
and input roads.</li>
<li>
<strong>weightRaster:</strong> the weights raster, updated to
reflect the new roads that were added.</li>
<li>
<strong>roadMethod</strong> the road simulation method used.</li>
<li>
<strong>landings</strong> the landings used in the simulation.</li>
<li>
<strong>g</strong> the graph that describes the cost of paths
between each cell in the weights raster. This is updated based on the
new roads so that vertices connected by new roads now have a weight of
0. This can be used to avoid recomputing the graph in a simulation with
multiple time steps.</li>
</ol>
<div class="section level4">
<h4 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/LandSciTech/roads" class="external-link">roads</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">## colours for displaying weight raster </span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"viridis"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="co"># Use colour blind friendly palette if available</span></span>
<span>  <span class="va">rastColours</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'grey50'</span>, <span class="fu">viridis</span><span class="fu">::</span><span class="fu"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">viridis</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">rastColours</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'grey50'</span>, <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">terrain.colors</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># terra objects need to be wrapped to be saved, this unwraps them</span></span>
<span><span class="va">CLUSexample</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepExData.html">prepExData</a></span><span class="op">(</span><span class="va">CLUSexample</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="resource-development-scenario">Resource development scenario<a class="anchor" aria-label="anchor" href="#resource-development-scenario"></a>
</h2>
<div class="section level4">
<h4 id="weights-raster-and-weight-function">1. Weights Raster and Weight Function<a class="anchor" aria-label="anchor" href="#weights-raster-and-weight-function"></a>
</h4>
<p>The cost of new roads development within the landscape is determined
by applying the <code>weightFunction</code> to the
<code>weightRaster</code>. The <code>weightRaster</code> must be
provided as a single, numeric <code>SpatRaster</code> or
<code>RasterLayer</code> object. The cell values in the raster for two
adjacent cells are provided to the <code>weightFunction</code> to
calculate the weight for the edge connecting the two cells in the graph
which should represent the cost of building a road connecting the two
cells. Two ways of calculating the cost are supported by the package
with the option for users to develop their own. The simplest method is
for the <code>weightRaster</code> values to represent the cost of
building a road across a cell and the for the
<code>weightFunction</code> to simply take the mean of the values in
adjacent cells. The other option included in the package is to use the
<code>slopePenaltyFn</code>. This function takes a modified DEM raster
as input and determines costs by applying a base cost and a grade
penalty which is multiplied by the % grade between adjacent cells. The
DEM can be modified by adding barriers to the raster, either as negative
values which represent high costs (e.g. a stream crossing) or NAs for
inaccessible areas (e.g. a cliff or a lake). See
<code><a href="../reference/slopePenaltyFn.html">?slopePenaltyFn</a></code> for more details.</p>
<p>The following points apply to all <code>weightRaster</code>s:<br>
* Weights of existing road segments are assumed to be zero. If existing
roads are not 0 in the <code>weightRaster</code> they can be “burned in”
by setting <code>roadsInWeight = FALSE</code>. * The extent of the
landscape of interest is assumed to match the extent of the specified
<code>weightRaster</code>. * The coordinate reference system (CRS) of
this raster must match all other input data-sets.<br>
* While the cell size (or resolution) of the <code>weightRaster</code>
is up to the user, it is important to remember that a unit area of road
is assumed to take up an entire cell. * Areas that are NA are not
included in the graph and are assumed to be inaccessible to roads. If a
landing is surrounded by NAs then it cannot be connected to the existing
road network and an error is produced.</p>
<p>The weight raster for this basic example is a cost surface and the
<code>weightFunction</code> used is the average.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weightRaster</span> <span class="op">&lt;-</span> <span class="va">CLUSexample</span><span class="op">$</span><span class="va">cost</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="existing-road-network-layer">2. Existing road network layer<a class="anchor" aria-label="anchor" href="#existing-road-network-layer"></a>
</h4>
<p>The state of the existing roads network must be specified to the
<code>projectRoads</code> method. This specification is made in the form
of an <code>sf</code> object with geometry type “LINES”, a
<code>SpatialLines</code> object, a <code>RasterLayer</code>, or a
<code>SpatRaster</code>. If the input roads are a raster the resulting
roads will be returned as a raster by default but if
<code>roadsOut = "sf"</code> is set then a geometry collection of lines
and points will be returned with points representing the input
roads.</p>
<p>The roads network included in the <code>CLUSexample</code> data-set
is a raster but we use a line to make plotting easier.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## existing roads network</span></span>
<span><span class="va">roadsLine</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span>geometry <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_linestring</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">4.5</span>, <span class="fl">4.5</span>, <span class="fl">4.5</span><span class="op">)</span>,</span>
<span>         ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> </span>
<span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">weightRaster</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="landings-layers">3. Landings layer(s)<a class="anchor" aria-label="anchor" href="#landings-layers"></a>
</h4>
<p>Landings, or resource development locations, that are to be connected
to the existing road network can be specified to the
<code>projectRoads</code> method in a variety of forms. These include
specification as:</p>
<ul>
<li>A <code>sf</code> object with geometry type “POINTS” or
“POLYGONs”</li>
<li>A logical <code>SpatRaster</code> or <code>RasterLayer</code> object
with cell values of <code>TRUE</code> for landings,</li>
<li>A <code>SpatialPoints</code> or <code>SpatialPointsDataFrame</code>
object with points representing landings,</li>
<li>A matrix with at least two columns, with columns 1 and 2
representing x any y coordinates of landing locations respectively,</li>
<li>A <code>SpatialPolygons</code>or
<code>SpatialPolygonsDataFrame</code> object with polygons representing
landings,</li>
</ul>
<p>If the landings are polygons then the centroid is used as the
destination for new roads. For more control or to have more than one
landing per polygon see Multiple landings per harvest block below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## landings as spatial points</span></span>
<span><span class="va">landings</span> <span class="op">&lt;-</span> <span class="fu">roads</span><span class="fu">::</span><span class="va"><a href="../reference/CLUSexample.html">CLUSexample</a></span><span class="op">$</span><span class="va">landings</span></span>
<span></span>
<span><span class="co">## plot example scenario</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours</span>, main <span class="op">=</span> <span class="st">'Example Scenario'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">roadsLine</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">landings</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, pch <span class="op">=</span> <span class="fl">19</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span>x<span class="op">=</span><span class="fl">5.6</span>,y<span class="op">=</span><span class="fl">4.5</span>,pch<span class="op">=</span><span class="fl">19</span>,xpd<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span>x<span class="op">=</span><span class="fl">5.8</span>,y<span class="op">=</span><span class="fl">4.5</span>,labels<span class="op">=</span><span class="st">'landing'</span>,adj<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.4</span><span class="op">)</span>,xpd<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">lines</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.3</span>,<span class="fl">5.6</span><span class="op">)</span>,y<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.2</span>,<span class="fl">4.2</span><span class="op">)</span>,lwd<span class="op">=</span><span class="fl">2</span>,xpd<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span>x<span class="op">=</span><span class="fl">5.75</span>,y<span class="op">=</span><span class="fl">4.2</span>,labels<span class="op">=</span><span class="st">'roads'</span>,adj<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.3</span><span class="op">)</span>,xpd<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-3-1.png" width="480"></p>
<p>Notice that the top row of the raster has a cost of zero, this is
where an existing road traverses the landscape.</p>
</div>
<div class="section level4">
<h4 id="output-format">Output format<a class="anchor" aria-label="anchor" href="#output-format"></a>
</h4>
<p><code>projectRoads</code> accepts a wide range of classes of spatial
objects as input but all results are returned as <code>sf</code> for
vectors and <code>SpatRaster</code> for rasters.</p>
</div>
</div>
<div class="section level2">
<h2 id="simulation-of-new-roads-development">Simulation of new roads development<a class="anchor" aria-label="anchor" href="#simulation-of-new-roads-development"></a>
</h2>
<div class="section level3">
<h3 id="simulation-methods">Simulation methods<a class="anchor" aria-label="anchor" href="#simulation-methods"></a>
</h3>
<div class="section level4">
<h4 id="snapping">1. Snapping<a class="anchor" aria-label="anchor" href="#snapping"></a>
</h4>
<p>This approach simply ‘snaps’ a landing to the nearest existing road
segment. Since the snapping is done for each landing it is also called
an independent path method.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## project new roads using the 'snap' approach</span></span>
<span><span class="va">projRoads_snap</span> <span class="op">&lt;-</span> <span class="fu">roads</span><span class="fu">::</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">landings</span>, <span class="va">weightRaster</span>, <span class="va">roadsLine</span>,</span>
<span>                                      roadMethod <span class="op">=</span> <span class="st">'snap'</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_intersection assumes that they</span></span>
<span><span class="co">#&gt; are planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_intersection assumes that they</span></span>
<span><span class="co">#&gt; are planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_union assumes that they are</span></span>
<span><span class="co">#&gt; planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_nearest_points assumes that</span></span>
<span><span class="co">#&gt; they are planar</span></span>
<span></span>
<span><span class="co">## plot the weight raster, landings, and roads segments to the landings</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours</span>, main <span class="op">=</span> <span class="st">"'Snapped' roads"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">landings</span>, pch <span class="op">=</span> <span class="fl">19</span>, col <span class="op">=</span> <span class="st">'red'</span><span class="op">)</span>  </span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">projRoads_snap</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span></span>
<span><span class="co">## update legend</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.5</span>, y <span class="op">=</span> <span class="fl">4.8</span>, pch <span class="op">=</span> <span class="fl">19</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">'red'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.7</span>, y <span class="op">=</span> <span class="fl">4.8</span>, labels <span class="op">=</span> <span class="st">'landing'</span>, adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.4</span><span class="op">)</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">lines</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.3</span>, <span class="fl">5.6</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.2</span>, <span class="fl">4.2</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">2</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.75</span>, y <span class="op">=</span> <span class="fl">4.2</span>, labels <span class="op">=</span> <span class="st">'roads'</span>, adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.3</span><span class="op">)</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-4-1.png" width="480"></p>
<p>Using this approach, a few issues would arise:</p>
<ol style="list-style-type: decimal">
<li><p>parallel roads are not realistic since there is no branching and
this leads to increased numbers of roads;</p></li>
<li><p>costs are not included (i.e., slope and barriers like large water
bodies).</p></li>
</ol>
<p>This means this approach, while simple to implement, would over
estimate the amount of simulated roads.</p>
</div>
<div class="section level4">
<h4 id="least-cost-paths-lcp">2. Least Cost Paths (LCP)<a class="anchor" aria-label="anchor" href="#least-cost-paths-lcp"></a>
</h4>
<p>This approach builds upon the snapping approach by assuming a ‘cost
directed’ path (i.e., “as the wolf runs”) for each landing to the
existing road network. This approach requires that a cost surface be
provided and used to build a mathematical <a href="https://en.wikipedia.org/wiki/Graph_theory" class="external-link">graph</a> using <a href="https://igraph.org/r/" class="external-link"><code>igraph</code></a> and takes
considerably longer to compute.</p>
<p>Once the graph is built, the least cost path between each landing and
the nearest existing road is determined using <a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm" class="external-link">Dijkstra’s
algorithm</a>, which is implemented in the <a href="https://igraph.org/r/doc/distances.html" class="external-link">shortest_paths</a>
function in <code>igraph</code>. Then the graph is updated so that the
graph returned in the result reflects the new roads built.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## project new roads using the 'LCP' approach</span></span>
<span><span class="va">projRoads_lcp</span> <span class="op">&lt;-</span> <span class="fu">roads</span><span class="fu">::</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">landings</span>, </span>
<span>                                        <span class="va">weightRaster</span>, </span>
<span>                                        <span class="va">roadsLine</span>, </span>
<span>                                        roadMethod <span class="op">=</span> <span class="st">'lcp'</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_intersection assumes that they</span></span>
<span><span class="co">#&gt; are planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_intersection assumes that they</span></span>
<span><span class="co">#&gt; are planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_union assumes that they are</span></span>
<span><span class="co">#&gt; planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_nearest_points assumes that</span></span>
<span><span class="co">#&gt; they are planar</span></span>
<span></span>
<span><span class="co">## plot the weight raster and overlay it with new roads</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours</span>, main <span class="op">=</span> <span class="st">"'LCP' roads"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">projRoads_lcp</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">landings</span>, pch <span class="op">=</span> <span class="fl">19</span>, col <span class="op">=</span> <span class="st">'red'</span><span class="op">)</span>  <span class="co">## landings points</span></span>
<span><span class="co">## legend</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.5</span>, y <span class="op">=</span> <span class="fl">4.8</span>, pch <span class="op">=</span> <span class="fl">19</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">'red'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.7</span>, y <span class="op">=</span> <span class="fl">4.8</span>, labels <span class="op">=</span> <span class="st">'landing'</span>, adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.4</span><span class="op">)</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">lines</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.3</span>, <span class="fl">5.6</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.2</span>, <span class="fl">4.2</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">2</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.75</span>, y <span class="op">=</span> <span class="fl">4.2</span>, labels <span class="op">=</span> <span class="st">'roads'</span>, adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.3</span><span class="op">)</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-5-1.png" width="480"></p>
<p>The main disadvantage of this approach is that roads are developed
independently. The least cost path may produce parallel or redundant
roads since a path is made for each target to the corresponding closest
point. This may mimic road development since road tenures give licensees
the right to limit other industrial users from using their road (i.e.,
gated roads); thereby forcing the other industrial users to consider
building a nearly parallel road. In some cases there will be branching,
where two roads connecting two landings to an existing road network will
use the same least cost path; however, this will be conditional on the
spatial configuration of the local cost surface and the existing road
network. Thus, the amount of road being developed from the LCP is
dependent on the local cost surface and may be either higher or lower
than the corresponding snap approach.</p>
</div>
<div class="section level4">
<h4 id="iterative-least-cost-paths-ilcp">3. Iterative Least Cost Paths (ILCP)<a class="anchor" aria-label="anchor" href="#iterative-least-cost-paths-ilcp"></a>
</h4>
<p>This approach reduces the number of parallel roads seen in the LCP
method because a road to each landing is built sequentially and the cost
in the graph is updated after each so that roads built earlier can be
used to access other landings. The order is determined by the
<code>ordering</code> argument to <code>projectRoads</code> and by
default builds roads to the closest landings first. To prevent this and
build roads in the order that the landings are supplied use
<code>ordering = none</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## project new roads using the 'ILCP' approach</span></span>
<span><span class="va">projRoads_ilcp</span> <span class="op">&lt;-</span> <span class="fu">roads</span><span class="fu">::</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">landings</span>, </span>
<span>                                        <span class="va">weightRaster</span>, </span>
<span>                                        <span class="va">roadsLine</span>, </span>
<span>                                        roadMethod <span class="op">=</span> <span class="st">'ilcp'</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_intersection assumes that they</span></span>
<span><span class="co">#&gt; are planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_intersection assumes that they</span></span>
<span><span class="co">#&gt; are planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_union assumes that they are</span></span>
<span><span class="co">#&gt; planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_nearest_points assumes that</span></span>
<span><span class="co">#&gt; they are planar</span></span>
<span></span>
<span><span class="co">## plot the weight raster and overlay it with new roads</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours</span>, main <span class="op">=</span> <span class="st">"'ILCP' roads"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">projRoads_ilcp</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">landings</span>, pch <span class="op">=</span> <span class="fl">19</span>, col <span class="op">=</span> <span class="st">'red'</span><span class="op">)</span>  <span class="co">## landings points</span></span>
<span><span class="co">## legend</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.5</span>, y <span class="op">=</span> <span class="fl">4.8</span>, pch <span class="op">=</span> <span class="fl">19</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">'red'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.7</span>, y <span class="op">=</span> <span class="fl">4.8</span>, labels <span class="op">=</span> <span class="st">'landing'</span>, adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.4</span><span class="op">)</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">lines</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.3</span>, <span class="fl">5.6</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.2</span>, <span class="fl">4.2</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">2</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.75</span>, y <span class="op">=</span> <span class="fl">4.2</span>, labels <span class="op">=</span> <span class="st">'roads'</span>, adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.3</span><span class="op">)</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-6-1.png" width="480"></p>
<p>The ILCP approach produces more of a network rather than many
parallel roads. However, it is sensitive to the ordering of the
landings. Below we reverse the order of the landings but continue using
the default ordering of closest first. The two closest landings are tied
for distance to the road and the tie is broken by the order they are
supplied in so switching that produces a different road network.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## project new roads using the 'ILCP' approach</span></span>
<span><span class="va">projRoads_ilcp2</span> <span class="op">&lt;-</span> <span class="fu">roads</span><span class="fu">::</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html" class="external-link">st_coordinates</a></span><span class="op">(</span><span class="va">landings</span><span class="op">)</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">1</span>,<span class="op">]</span>, </span>
<span>                                        <span class="va">weightRaster</span>, </span>
<span>                                        <span class="va">roadsLine</span>, </span>
<span>                                        roadMethod <span class="op">=</span> <span class="st">'ilcp'</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; CRS of landings supplied as a matrix is assumed to match the weightRaster</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_intersection assumes that they</span></span>
<span><span class="co">#&gt; are planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_intersection assumes that they</span></span>
<span><span class="co">#&gt; are planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_union assumes that they are</span></span>
<span><span class="co">#&gt; planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_nearest_points assumes that</span></span>
<span><span class="co">#&gt; they are planar</span></span>
<span></span>
<span><span class="co">## plot the weight raster and overlay it with new roads</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours</span>, main <span class="op">=</span> <span class="st">"'ILCP' roads"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">projRoads_ilcp2</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">landings</span>, pch <span class="op">=</span> <span class="fl">19</span>, col <span class="op">=</span> <span class="st">'red'</span><span class="op">)</span>  <span class="co">## landings points</span></span>
<span><span class="co">## legend</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.5</span>, y <span class="op">=</span> <span class="fl">4.8</span>, pch <span class="op">=</span> <span class="fl">19</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">'red'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.7</span>, y <span class="op">=</span> <span class="fl">4.8</span>, labels <span class="op">=</span> <span class="st">'landing'</span>, adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.4</span><span class="op">)</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">lines</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.3</span>, <span class="fl">5.6</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.2</span>, <span class="fl">4.2</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">2</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.75</span>, y <span class="op">=</span> <span class="fl">4.2</span>, labels <span class="op">=</span> <span class="st">'roads'</span>, adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.3</span><span class="op">)</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-7-1.png" width="480"></p>
</div>
<div class="section level4">
<h4 id="minimum-spanning-tree-mst-with-least-cost-paths-lcp">4. Minimum Spanning Tree (MST) with Least Cost Paths (LCP)<a class="anchor" aria-label="anchor" href="#minimum-spanning-tree-mst-with-least-cost-paths-lcp"></a>
</h4>
<p>The MST approach builds upon the LCP approach by determining if
landings should be connected to one another before being connected to
the existing road network. In the MST approach, LCPs are estimated both
between the landings and between landings and the existing road network.
These distances are then used as nodes for solving a minimum spanning
tree. The sequence of vertices from the LCPs are then constructed
following the solution to the MST.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## project new roads using the 'MST' approach</span></span>
<span><span class="va">projRoads_mst</span> <span class="op">&lt;-</span> <span class="fu">roads</span><span class="fu">::</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">landings</span>, </span>
<span>                                        <span class="va">weightRaster</span>,</span>
<span>                                        <span class="va">roadsLine</span>, </span>
<span>                                        roadMethod <span class="op">=</span> <span class="st">'mst'</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_intersection assumes that they</span></span>
<span><span class="co">#&gt; are planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_intersection assumes that they</span></span>
<span><span class="co">#&gt; are planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_union assumes that they are</span></span>
<span><span class="co">#&gt; planar</span></span>
<span><span class="co">#&gt; although coordinates are longitude/latitude, st_nearest_points assumes that</span></span>
<span><span class="co">#&gt; they are planar</span></span>
<span></span>
<span><span class="co">## plot the weight raster and overlay it with new roads</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours</span>, main <span class="op">=</span> <span class="st">"'MST' roads"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">projRoads_mst</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">landings</span>, pch <span class="op">=</span> <span class="fl">19</span>, col <span class="op">=</span> <span class="st">'red'</span><span class="op">)</span>  <span class="co">## landings points</span></span>
<span><span class="co">## legend</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.5</span>, y <span class="op">=</span> <span class="fl">4.8</span>, pch <span class="op">=</span> <span class="fl">19</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">'red'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.7</span>, y <span class="op">=</span> <span class="fl">4.8</span>, labels <span class="op">=</span> <span class="st">'landing'</span>, adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.4</span><span class="op">)</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">lines</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5.3</span>, <span class="fl">5.6</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.2</span>, <span class="fl">4.2</span><span class="op">)</span>, lwd <span class="op">=</span> <span class="fl">2</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">5.75</span>, y <span class="op">=</span> <span class="fl">4.2</span>, labels <span class="op">=</span> <span class="st">'roads'</span>, adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.3</span><span class="op">)</span>, xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-8-1.png" width="480"></p>
<p>The MST approach will produce the least amount of roads (relative to
the other approaches), given landings are allowed to connect to other
landings. This approach simulates a realistic view of road branching
relative to the other approaches. However, given the need to get LCP
distances, solve a MST and then construct the LCPs, it will likely be
the most costly in terms of computation time.</p>
</div>
</div>
<div class="section level3">
<h3 id="one-time-versus-multi-temporal-simulation">One-time versus multi-temporal simulation<a class="anchor" aria-label="anchor" href="#one-time-versus-multi-temporal-simulation"></a>
</h3>
<p>Roads development simulation can be performed either for a single
time step (one-time) or for multiple time steps. This section will use a
demonstration scenario <code>demoScen</code> data-set that is included
with the roads package. There are four different sets of landings.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## colours for displaying weight raster</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"viridis"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="co"># Use colour blind friendly palette if available</span></span>
<span>  <span class="va">rastColours2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'grey50'</span>, <span class="fu">viridis</span><span class="fu">::</span><span class="fu"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">viridis</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">rastColours2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'grey50'</span>, <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">terrain.colors</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co">## scenario </span></span>
<span><span class="va">demoScen</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepExData.html">prepExData</a></span><span class="op">(</span><span class="va">demoScen</span><span class="op">)</span></span>
<span><span class="va">scen</span> <span class="op">&lt;-</span> <span class="va">demoScen</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">## landing sets 1 to 4 of this scenario </span></span>
<span><span class="va">land.pnts</span> <span class="op">&lt;-</span> <span class="va">scen</span><span class="op">$</span><span class="va">landings.points</span><span class="op">[</span><span class="va">scen</span><span class="op">$</span><span class="va">landings.points</span><span class="op">$</span><span class="va">set</span> <span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="co">## plot the weight raster and landings</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">'mar'</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, col <span class="op">=</span> <span class="va">rastColours2</span>, main <span class="op">=</span> <span class="st">'Cost and landings (by set)'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">land.pnts</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, pch <span class="op">=</span> <span class="fl">21</span>, cex <span class="op">=</span> <span class="fl">2</span>, bg <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/text.html" class="external-link">text</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html" class="external-link">st_coordinates</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">)</span>, labels <span class="op">=</span> <span class="va">land.pnts</span><span class="op">$</span><span class="va">set</span>, cex <span class="op">=</span> <span class="fl">0.6</span>, adj <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>     xpd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-9-1.png" width="672"></p>
<div class="section level4">
<h4 id="one-time-simulation">One-time simulation<a class="anchor" aria-label="anchor" href="#one-time-simulation"></a>
</h4>
<p>If landings, costs, and roads are all specified to
<code>projectRoads</code>, then a one-time road simulation will be
performed that returns a list object holding the projected roads and
related information. This can be repeated multiple times for different
road building scenarios but each simulation will be independent of
previous simulations. This would be appropriate if each landing set
represented alternate scenarios for development.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## project roads for landing sets 1 to 4, with independent one-time simulations</span></span>
<span><span class="va">oneTime_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span> <span class="co">## empty list </span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">oneTime_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">oneTime_sim</span>,</span>
<span>                       <span class="fu">roads</span><span class="fu">::</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">[</span><span class="va">land.pnts</span><span class="op">$</span><span class="va">set</span><span class="op">==</span><span class="va">i</span>,<span class="op">]</span>,</span>
<span>                                              <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>,</span>
<span>                                              <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span><span class="op">==</span><span class="fl">0</span>,</span>
<span>                                              roadMethod<span class="op">=</span><span class="st">'mst'</span><span class="op">)</span><span class="op">$</span><span class="va">roads</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span></span>
<span><span class="co">## plot</span></span>
<span><span class="va">oldpar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">'mar'</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">oneTime_sim</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="op">!</span><span class="va">oneTime_sim</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span> </span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, col <span class="op">=</span> <span class="va">rastColours2</span>, </span>
<span>       main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'Landings set '</span>, <span class="va">i</span><span class="op">)</span>,</span>
<span>       legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">oneTime_sim</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">"grey50"</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">[</span><span class="va">land.pnts</span><span class="op">$</span><span class="va">set</span> <span class="op">==</span> <span class="va">i</span>, <span class="op">]</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>       pch <span class="op">=</span> <span class="fl">21</span>, cex <span class="op">=</span> <span class="fl">1.5</span>, bg <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-10-1.png" width="672"></p>
<p>While the results of these one-time simulations may be fine when
looking at each landings scenario/set independently (e.g. each
representing a possible scenario for time t=1), they are likely not
appropriate for cases where all landings sets follow a temporal
development sequence (e.g. set 1 is development at time t=1, set 2 is
development at time t=2, and so on). Independent one-time simulations do
not take into account the fact that, for a given time step, existing
roads for a given simulation should be the union of existing roads at
time t=0 and all roads simulation results leading up to the current
step. For example, existing roads input into simulation at time t=2
(landings set 2), would be the union of existing roads at time t=0 and
projected roads at time t=1 (landings set 1).</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## raster representing the union of completely independent simulations for multiple sets</span></span>
<span><span class="va">oneTime_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">oneTime_sim</span><span class="op">)</span></span>
<span><span class="va">independent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">oneTime_sim</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">## set non-road to NA for display purposes</span></span>
<span><span class="va">independent</span><span class="op">[</span><span class="op">!</span><span class="va">independent</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="co">## plot </span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, col <span class="op">=</span> <span class="va">rastColours2</span>,</span>
<span>     main <span class="op">=</span> <span class="st">'Union of independent sim results'</span>,</span>
<span>     legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">independent</span>, col <span class="op">=</span> <span class="st">'grey30'</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, pch <span class="op">=</span> <span class="fl">21</span>, cex <span class="op">=</span> <span class="fl">1.5</span>, bg <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-11-1.png" width="480"></p>
</div>
<div class="section level4">
<h4 id="multi-temporal-simulation">Multi-temporal simulation<a class="anchor" aria-label="anchor" href="#multi-temporal-simulation"></a>
</h4>
<p>Multi-temporal (multiple time steps) roads projections can be
performed by <code>projectRoads</code>, by providing the list produced
by a previous simulation run (sim list) to the <code>sim</code> argument
and the landings for the current time period. The function uses the sim
list as a starting point and does not need to recompute the graph used
to determine the least cost path. This can be implemented in a loop.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## continuing on with demo scenario 1</span></span>
<span><span class="co">## landing sets 1 to 4 of this scenario as a raster stack</span></span>
<span><span class="va">land.stack</span> <span class="op">&lt;-</span> <span class="va">scen</span><span class="op">$</span><span class="va">landings.stack</span><span class="op">[[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># initialize sim list with first landings set</span></span>
<span><span class="va">multiTime_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">land.stack</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, </span>
<span>                                               <span class="va">scen</span><span class="op">$</span><span class="va">road.line</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span></span>
<span><span class="co"># iterate over landings sets using the sim list from the previous run as input</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nlyr</a></span><span class="op">(</span><span class="va">land.stack</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">multiTime_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="va">multiTime_sim</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span>sim <span class="op">=</span>  <span class="va">multiTime_sim</span><span class="op">[[</span><span class="va">i</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, landings <span class="op">=</span> <span class="va">land.stack</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> </span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="st">'mar'</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, col <span class="op">=</span> <span class="va">rastColours2</span>, main <span class="op">=</span> <span class="st">'Roads at time t = 0'</span>, </span>
<span>       legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">road.line</span>, col <span class="op">=</span> <span class="st">'grey30'</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  </span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">multiTime_sim</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">multiTime_sim</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">weightRaster</span>, col <span class="op">=</span> <span class="va">rastColours2</span>, </span>
<span>       main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'Roads at time t = '</span>, <span class="va">i</span><span class="op">)</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">multiTime_sim</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">roads</span>, col <span class="op">=</span> <span class="st">'grey30'</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">[</span><span class="va">land.pnts</span><span class="op">$</span><span class="va">set</span> <span class="op">==</span> <span class="va">i</span>, <span class="op">]</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, pch <span class="op">=</span> <span class="fl">21</span>, </span>
<span>         cex <span class="op">=</span> <span class="fl">1.5</span>, bg <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">i</span> <span class="op">&gt;=</span> <span class="fl">2</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">[</span><span class="va">land.pnts</span><span class="op">$</span><span class="va">set</span> <span class="op">&lt;</span> <span class="va">i</span>, <span class="op">]</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, pch <span class="op">=</span> <span class="fl">1</span>, cex <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">land.pnts</span><span class="op">[</span><span class="va">land.pnts</span><span class="op">$</span><span class="va">set</span> <span class="op">==</span> <span class="va">i</span>, <span class="op">]</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, pch <span class="op">=</span> <span class="fl">21</span>, </span>
<span>         cex <span class="op">=</span> <span class="fl">1.5</span>, bg <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-12-1.png" width="672"></p>
</div>
</div>
<div class="section level3">
<h3 id="multiple-landings-per-harvest-block">Multiple landings per harvest block<a class="anchor" aria-label="anchor" href="#multiple-landings-per-harvest-block"></a>
</h3>
<p>Often harvest information is available as polygons showing the
cutover area but the point locations of landings are not known. The
roads package includes the <code>getLandingsFromTarget</code> function
to address these situations. By default
<code>getLandingsFromTarget</code> will use the centroid of a polygon as
the landing but you can also specify a <code>sampleType</code> of
“random” or “regular” and a <code>landingDens</code> in landings per
unit area to generate multiple landing points with in the harvest
block.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">harvPoly</span> <span class="op">&lt;-</span> <span class="va">demoScen</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">landings.poly</span></span>
<span></span>
<span><span class="va">outCent</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getLandingsFromTarget.html">getLandingsFromTarget</a></span><span class="op">(</span><span class="va">harvPoly</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: st_point_on_surface assumes attributes are constant over geometries</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">harvPoly</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">outCent</span>, col <span class="op">=</span> <span class="st">"red"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-13-1.png" width="576"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Get random sample with density 0.02 pts per unit area</span></span>
<span><span class="va">outRand</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getLandingsFromTarget.html">getLandingsFromTarget</a></span><span class="op">(</span><span class="va">harvPoly</span>, <span class="fl">0.02</span>, sampleType <span class="op">=</span> <span class="st">"random"</span><span class="op">)</span></span>
<span><span class="co">#&gt; you have asked for &gt; 0.001 pts per m2 which is &gt; 1000 pts per km2 and may take a long time</span></span>
<span><span class="va">prRand</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">outRand</span>, <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, <span class="va">scen</span><span class="op">$</span><span class="va">road.line</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, main <span class="op">=</span> <span class="st">"Random Landings in Harvest Blocks"</span>,</span>
<span>     col <span class="op">=</span> <span class="va">rastColours2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">harvPoly</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">prRand</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span>,  col <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">outRand</span>, col <span class="op">=</span> <span class="st">"red"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-13-2.png" width="576"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Get regular sample with density 0.02 pts per unit area</span></span>
<span><span class="va">outReg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getLandingsFromTarget.html">getLandingsFromTarget</a></span><span class="op">(</span><span class="va">harvPoly</span>, <span class="fl">0.02</span>, sampleType <span class="op">=</span> <span class="st">"regular"</span><span class="op">)</span></span>
<span><span class="co">#&gt; you have asked for &gt; 0.001 pts per m2 which is &gt; 1000 pts per km2 and may take a long time</span></span>
<span><span class="va">prReg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projectRoads.html">projectRoads</a></span><span class="op">(</span><span class="va">outReg</span>, <span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>,<span class="va">scen</span><span class="op">$</span><span class="va">road.line</span><span class="op">)</span></span>
<span><span class="co">#&gt; 0s detected in weightRaster raster, these will be considered as existing roads</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">scen</span><span class="op">$</span><span class="va">cost.rast</span>, main <span class="op">=</span> <span class="st">"Regular Landings in Harvest Blocks"</span>,</span>
<span>     col <span class="op">=</span> <span class="va">rastColours2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">harvPoly</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">prReg</span><span class="op">$</span><span class="va">roads</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">outReg</span>, col <span class="op">=</span> <span class="st">"red"</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="roads-vignette_files/figure-html/unnamed-chunk-13-3.png" width="576"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="co"># clean up </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span><span class="va">oldpar</span><span class="op">)</span></span></code></pre></div>
<p>The regular sampling method may be the most realistic since it
ensures that landings are spaced apart from each other.</p>
</div>
</div>
<div class="section level2">
<h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a>
</h2>
<p>This vignette is partially copied from Kyle Lochhead &amp; Tyler
Muhly’s <a href="https://github.com/bcgov/castor/blob/main/reports/roads/draft-CLUS-roads.md" class="external-link">2018
CLUS example</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sarah Endicott, Kyle Lochhead, Josie Hughes, Patrick Kirby.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
